-- Crear tabla de g√©neros
CREATE TABLE genders (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR2(50) NOT NULL UNIQUE
);

-- Crear tabla de puestos
CREATE TABLE jobs (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR2(100) NOT NULL UNIQUE,
    salary NUMBER(10, 2) NOT NULL
);

-- Crear tabla de empleados
CREATE TABLE employees (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR2(100) NOT NULL,
    last_name VARCHAR2(100) NOT NULL,
    birthdate DATE NOT NULL,
    gender_id NUMBER NOT NULL,
    job_id NUMBER NOT NULL,
    CONSTRAINT fk_gender FOREIGN KEY (gender_id) REFERENCES genders(id),
    CONSTRAINT fk_job FOREIGN KEY (job_id) REFERENCES jobs(id),
    CONSTRAINT unq_name_last_name UNIQUE (name, last_name)
);

-- Crear tabla de horas trabajadas por empleado
CREATE TABLE employee_worked_hours (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    employee_id NUMBER NOT NULL,
    worked_hours NUMBER CHECK (worked_hours <= 20),
    worked_date DATE NOT NULL,
    CONSTRAINT fk_employee FOREIGN KEY (employee_id) REFERENCES employees(id),
    CONSTRAINT unq_employee_date UNIQUE (employee_id, worked_date)
);
